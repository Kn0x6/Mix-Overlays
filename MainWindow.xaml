<Window x:Class="MixOverlays.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:MixOverlays.ViewModels"
        xmlns:views="clr-namespace:MixOverlays.Views"
        xmlns:conv="clr-namespace:MixOverlays.Converters"
        Title="MixOverlays" Height="750" Width="980"
        MinWidth="860" MinHeight="600"
        Background="{StaticResource BgDeepBrush}"
        WindowStyle="None" AllowsTransparency="True"
        ResizeMode="CanResizeWithGrip">

    <Window.Resources>
        <conv:BoolToVisibilityConverter         x:Key="BoolVis"/>
        <conv:InverseBoolToVisibilityConverter  x:Key="InvBoolVis"/>
        <conv:NullToVisibilityConverter         x:Key="NullVis"/>
        <conv:HexStringToBrushConverter         x:Key="HexBrush"/>
        <conv:DoubleFormatConverter             x:Key="DoubleFmt"/>
        <conv:TimeAgoConverter                  x:Key="TimeAgo"/>
        <conv:GameDurationConverter             x:Key="GameDuration"/>
        <conv:ChampionNameToImageConverter      x:Key="ChampImg"/>
        <conv:SummonerSpellIdToImageConverter   x:Key="SpellImg"/>
        <conv:WinLossBrushConverter             x:Key="WinLossBrush"/>
    </Window.Resources>

    <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="12">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="44"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="28"/>
            </Grid.RowDefinitions>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!--  TITLE BAR                                             -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <Border Grid.Row="0" Background="{StaticResource BgPrimaryBrush}"
                    CornerRadius="12,12,0,0"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid Margin="14,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Logo -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <Ellipse Width="18" Height="18" Margin="0,0,6,0">
                            <Ellipse.Fill>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#1F6FEB" Offset="0"/>
                                    <GradientStop Color="#8B5CF6" Offset="1"/>
                                </LinearGradientBrush>
                            </Ellipse.Fill>
                        </Ellipse>
                        <TextBlock Text="MixOverlays"
                                   Foreground="{StaticResource TextPrimaryBrush}"
                                   FontWeight="SemiBold" FontSize="14"
                                   VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Status indicator -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal"
                                HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Ellipse Width="8" Height="8" Margin="0,0,6,0"
                                 Fill="{Binding StatusDotColor, Converter={StaticResource HexBrush}}"/>
                        <TextBlock Text="{Binding ClientStateDisplay}"
                                   Foreground="{StaticResource TextSecondaryBrush}"
                                   FontSize="12"/>
                    </StackPanel>

                    <!-- Window controls -->
                    <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center">
                        <Button Content="‚îÄ" Width="32" Height="28"
                                Background="Transparent" Foreground="{StaticResource TextSecondaryBrush}"
                                BorderThickness="0" Click="MinimizeButton_Click" Cursor="Hand"
                                FontSize="14"/>
                        <Button x:Name="BtnFullscreen" Content="‚õ∂" Width="32" Height="28"
                                Background="Transparent" Foreground="{StaticResource TextSecondaryBrush}"
                                BorderThickness="0" Click="FullscreenButton_Click" Cursor="Hand"
                                FontSize="13" ToolTip="Plein √©cran"/>
                        <Button Content="‚úï" Width="32" Height="28"
                                Background="Transparent" Foreground="{StaticResource TextSecondaryBrush}"
                                BorderThickness="0" Click="CloseButton_Click" Cursor="Hand"
                                FontSize="12"/>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!--  MAIN CONTENT                                          -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <Grid Grid.Row="1" Background="{StaticResource BgDeepBrush}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="190" MinWidth="160"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- ‚îÄ‚îÄ‚îÄ SIDEBAR NAV ‚îÄ‚îÄ‚îÄ -->
                <Border Grid.Column="0"
                        Background="{StaticResource BgPrimaryBrush}"
                        BorderBrush="{StaticResource BorderBrush}"
                        BorderThickness="0,0,1,0">
                    <StackPanel Margin="8,12">
                        <TextBlock Text="NAVIGATION"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   FontSize="9" FontWeight="SemiBold"
                                   Margin="8,0,0,8"/>

                        <Button x:Name="BtnMyAccount" Content="üë§  Mon Compte"
                                Style="{StaticResource GhostButton}"
                                HorizontalContentAlignment="Left"
                                Margin="0,2" Height="38"
                                Click="NavButton_Click" Tag="MyAccount"/>

                        <Button x:Name="BtnLive" Content="üéÆ  Live Session"
                                Style="{StaticResource GhostButton}"
                                HorizontalContentAlignment="Left"
                                Margin="0,2" Height="38"
                                Click="NavButton_Click" Tag="Live"/>

                        <Button x:Name="BtnSearch" Content="üîç  Rechercher"
                                Style="{StaticResource GhostButton}"
                                HorizontalContentAlignment="Left"
                                Margin="0,2" Height="38"
                                Click="NavButton_Click" Tag="Search"/>

                        <Button x:Name="BtnSettings" Content="‚öô  Param√®tres"
                                Style="{StaticResource GhostButton}"
                                HorizontalContentAlignment="Left"
                                Margin="0,2" Height="38"
                                Click="NavButton_Click" Tag="Settings"/>

                        <Separator Margin="8,12"/>

                        <!-- LCU Status box -->
                        <Border Background="{StaticResource BgCardBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="1" CornerRadius="8"
                                Padding="10" Margin="0,4">
                            <StackPanel>
                                <TextBlock Text="CLIENT LOL"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           FontSize="9" FontWeight="SemiBold" Margin="0,0,0,6"/>
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,2">
                                    <Ellipse Width="8" Height="8" Margin="0,0,6,0"
                                             Fill="{Binding StatusDotColor, Converter={StaticResource HexBrush}}"/>
                                    <TextBlock Text="{Binding ClientStateDisplay}"
                                               Foreground="{StaticResource TextSecondaryBrush}"
                                               FontSize="11" TextWrapping="Wrap"/>
                                </StackPanel>
                                <TextBlock Text="{Binding StatusMessage}"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           FontSize="10" TextWrapping="Wrap" Margin="0,4,0,0"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Border>

                <!-- ‚îÄ‚îÄ‚îÄ MAIN PANEL (frames) ‚îÄ‚îÄ‚îÄ -->
                <Grid Grid.Column="1">

                    <!-- LIVE SESSION PAGE -->
                    <Grid x:Name="PageLive">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Border Grid.Row="0" Background="{StaticResource BgPrimaryBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="0,0,0,1" Padding="16,10">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Live Session"
                                           Foreground="{StaticResource TextPrimaryBrush}"
                                           FontSize="16" FontWeight="SemiBold"
                                           VerticalAlignment="Center"/>
                                <Border Margin="12,0,0,0" Padding="8,3" CornerRadius="12"
                                        Background="{StaticResource BgCardBrush}">
                                    <TextBlock FontSize="11" Foreground="{StaticResource TextSecondaryBrush}">
                                        <Run Text="{Binding AllyTeam.Count, Mode=OneWay}"/>
                                        <Run Text=" alli√©s ¬∑"/>
                                        <Run Text="{Binding EnemyTeam.Count, Mode=OneWay}"/>
                                        <Run Text=" ennemis"/>
                                    </TextBlock>
                                </Border>
                            </StackPanel>
                        </Border>

                        <!-- Empty state -->
                        <StackPanel Grid.Row="1"
                                    Visibility="{Binding IsInLiveSession, Converter={StaticResource InvBoolVis}}"
                                    HorizontalAlignment="Center" VerticalAlignment="Center" Opacity="0.5">
                            <TextBlock Text="üéÆ" FontSize="48" HorizontalAlignment="Center"/>
                            <TextBlock Text="En attente d'une session..." Margin="0,12,0,0"
                                       Foreground="{StaticResource TextSecondaryBrush}"
                                       FontSize="15" HorizontalAlignment="Center"/>
                            <TextBlock Text="Lancez ou rejoignez une partie pour voir les stats des joueurs"
                                       Foreground="{StaticResource TextMutedBrush}"
                                       FontSize="12" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                        </StackPanel>

                        <!-- Teams columns -->
                        <Grid Grid.Row="1"
                              Visibility="{Binding IsInLiveSession, Converter={StaticResource BoolVis}}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Ally team -->
                            <Border Grid.Column="0" BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="0,0,1,0">
                                <DockPanel>
                                    <Border DockPanel.Dock="Top" Padding="12,8"
                                            Background="{StaticResource BgSecondaryBrush}">
                                        <TextBlock Text="üîµ  ALLI√âS"
                                                   Foreground="#388BFD"
                                                   FontSize="11" FontWeight="Bold"/>
                                    </Border>
                                    <ScrollViewer VerticalScrollBarVisibility="Auto"
                                                  Style="{StaticResource SlimScrollViewer}">
                                        <ItemsControl ItemsSource="{Binding AllyTeam}" Margin="8">
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <views:LivePlayerCard DataContext="{Binding}"/>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </ScrollViewer>
                                </DockPanel>
                            </Border>

                            <!-- Enemy team -->
                            <DockPanel Grid.Column="1">
                                <Border DockPanel.Dock="Top" Padding="12,8"
                                        Background="{StaticResource BgSecondaryBrush}">
                                    <TextBlock Text="üî¥  ENNEMIS"
                                               Foreground="#F85149"
                                               FontSize="11" FontWeight="Bold"/>
                                </Border>
                                <ScrollViewer VerticalScrollBarVisibility="Auto"
                                              Style="{StaticResource SlimScrollViewer}">
                                    <ItemsControl ItemsSource="{Binding EnemyTeam}" Margin="8">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <views:LivePlayerCard DataContext="{Binding}"/>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>
                            </DockPanel>
                        </Grid>
                    </Grid>

                    <!-- MON COMPTE PAGE -->
                    <Grid x:Name="PageMyAccount" Visibility="Collapsed">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Border Grid.Row="0" Background="{StaticResource BgPrimaryBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="0,0,0,1" Padding="16,10">
                            <Grid>
                                <TextBlock Text="Mon Compte"
                                           Foreground="{StaticResource TextPrimaryBrush}"
                                           FontSize="16" FontWeight="SemiBold"
                                           VerticalAlignment="Center"/>
                                <Button Content="üîÑ  Actualiser"
                                        Style="{StaticResource GhostButton}"
                                        Command="{Binding RefreshMyAccountCommand}"
                                        HorizontalAlignment="Right"
                                        Padding="10,5"/>
                            </Grid>
                        </Border>

                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>         <!-- Fiche joueur (gauche) -->
                                <ColumnDefinition Width="280"/>       <!-- Stats champions (droite) -->
                            </Grid.ColumnDefinitions>

                            <!-- Colonne gauche : fiche joueur existante -->
                            <ScrollViewer Grid.Column="0"
                                          VerticalScrollBarVisibility="Auto"
                                          Style="{StaticResource SlimScrollViewer}">
                                <Grid Margin="16">
                                    <!-- Loading skeleton -->
                                    <StackPanel Visibility="{Binding IsLoadingMyAccount, Converter={StaticResource BoolVis}}"
                                                HorizontalAlignment="Center" VerticalAlignment="Top"
                                                Margin="0,40" Opacity="0.6">
                                        <TextBlock Text="‚è≥ Chargement..."
                                                   Foreground="{StaticResource TextSecondaryBrush}"
                                                   FontSize="13" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                    <!-- Error -->
                                    <Border Visibility="{Binding HasMyAccountError, Converter={StaticResource BoolVis}}"
                                            Background="#1AF85149" BorderBrush="#F85149" BorderThickness="1"
                                            CornerRadius="8" Padding="16" Margin="0,20">
                                        <TextBlock Text="{Binding MyAccountError}"
                                                   Foreground="#F85149" FontSize="13" TextWrapping="Wrap"/>
                                    </Border>
                                    <!-- Not connected -->
                                    <StackPanel Visibility="{Binding IsConnected, Converter={StaticResource InvBoolVis}}"
                                                HorizontalAlignment="Center" VerticalAlignment="Top"
                                                Margin="0,60" Opacity="0.5">
                                        <TextBlock Text="üîå" FontSize="48" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Client LoL non connect√©"
                                                   Foreground="{StaticResource TextSecondaryBrush}"
                                                   FontSize="14" HorizontalAlignment="Center" Margin="0,12,0,0"/>
                                        <TextBlock Text="Lancez le client League of Legends"
                                                   Foreground="{StaticResource TextMutedBrush}"
                                                   FontSize="12" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                    </StackPanel>
                                    <!-- Fiche joueur -->
                                    <views:PlayerCard DataContext="{Binding MyAccount}"
                                                      Visibility="{Binding DataContext.HasMyAccount,
                                           RelativeSource={RelativeSource AncestorType=ScrollViewer},
                                           Converter={StaticResource BoolVis}}"/>
                                </Grid>
                            </ScrollViewer>

                            <!-- Colonne droite : stats champions -->
                            <Border Grid.Column="1"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1,0,0,0">
                                <views:ChampionStatsCard
                                    DataContext="{Binding MyAccount}"
                                    Visibility="{Binding DataContext.HasMyAccount,
                         RelativeSource={RelativeSource AncestorType=Border},
                         Converter={StaticResource BoolVis}}"
                                    Margin="0"/>
                            </Border>
                        </Grid>
                    </Grid>

                    <!-- SEARCH PAGE -->
                    <Grid x:Name="PageSearch" Visibility="Collapsed">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Border Grid.Row="0" Background="{StaticResource BgPrimaryBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="0,0,0,1" Padding="16,10">
                            <TextBlock Text="Rechercher un joueur"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       FontSize="16" FontWeight="SemiBold"/>
                        </Border>

                        <!-- Search bar -->
                        <Border Grid.Row="1" Padding="16,12"
                                Background="{StaticResource BgPrimaryBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="0,0,0,1">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <TextBox Grid.Column="0"
                                         Text="{Binding SearchInput, UpdateSourceTrigger=PropertyChanged}"
                                         Margin="0,0,8,0"
                                         KeyDown="SearchBox_KeyDown">
                                    <TextBox.Style>
                                        <Style TargetType="TextBox" BasedOn="{StaticResource {x:Type TextBox}}">
                                            <Style.Resources>
                                                <VisualBrush x:Key="PlaceholderBrush" AlignmentX="Left" AlignmentY="Center" Stretch="None">
                                                    <VisualBrush.Visual>
                                                        <TextBlock Text="Nom#TAG ou NomInvocateur"
                                                                   Foreground="{StaticResource TextMutedBrush}"
                                                                   Margin="10,0"/>
                                                    </VisualBrush.Visual>
                                                </VisualBrush>
                                            </Style.Resources>
                                            <Style.Triggers>
                                                <Trigger Property="Text" Value="">
                                                    <Setter Property="Background" Value="{StaticResource PlaceholderBrush}"/>
                                                </Trigger>
                                            </Style.Triggers>
                                        </Style>
                                    </TextBox.Style>
                                </TextBox>

                                <Button Grid.Column="1" Content="Rechercher"
                                        Style="{StaticResource AccentButton}"
                                        Command="{Binding SearchPlayerCommand}"
                                        Margin="0,0,6,0"/>

                                <Button Grid.Column="2" Content="‚úï"
                                        Style="{StaticResource GhostButton}"
                                        Width="36"
                                        Command="{Binding ClearSearchCommand}"
                                        Visibility="{Binding HasSearchResult, Converter={StaticResource BoolVis}}"/>
                            </Grid>
                        </Border>

                        <!-- Result -->
                        <Grid Grid.Row="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>      <!-- Fiche joueur (gauche) -->
                                <ColumnDefinition Width="280"/>    <!-- Stats champions (droite) -->
                            </Grid.ColumnDefinitions>

                            <!-- Colonne gauche : r√©sultat de recherche -->
                            <ScrollViewer Grid.Column="0"
                                          VerticalScrollBarVisibility="Auto"
                                          Style="{StaticResource SlimScrollViewer}">
                                <Grid Margin="16">
                                    <!-- Loading -->
                                    <StackPanel Visibility="{Binding IsSearching, Converter={StaticResource BoolVis}}"
                                                HorizontalAlignment="Center" VerticalAlignment="Top"
                                                Margin="0,40">
                                        <TextBlock Text="‚è≥ Chargement des donn√©es..."
                                                   Foreground="{StaticResource TextSecondaryBrush}"
                                                   FontSize="14" HorizontalAlignment="Center"/>
                                    </StackPanel>
                                    <!-- R√©sultat -->
                                    <views:PlayerCard DataContext="{Binding SearchedPlayer}"
                                                      Visibility="{Binding HasSearchResult, Converter={StaticResource BoolVis}}"/>
                                    <!-- Historique + empty state (inchang√©) -->
                                    <StackPanel Visibility="{Binding HasSearchResult, Converter={StaticResource InvBoolVis}}">
                                        <!-- Historique -->
                                        <StackPanel Visibility="{Binding HasSearchHistory, Converter={StaticResource BoolVis}}">
                                            <TextBlock Text="R√âCEMMENT RECHERCH√âS"
                                                       Foreground="{StaticResource TextMutedBrush}"
                                                       FontSize="10" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                            <ItemsControl ItemsSource="{Binding SearchHistory}">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Margin="0,2" Cursor="Hand" CornerRadius="6"
                                                                Background="{StaticResource BgCardBrush}"
                                                                BorderBrush="{StaticResource BorderBrush}"
                                                                BorderThickness="1" Padding="10,8"
                                                                MouseLeftButtonUp="HistoryItem_Click">
                                                            <Border.Style>
                                                                <Style TargetType="Border">
                                                                    <Style.Triggers>
                                                                        <Trigger Property="IsMouseOver" Value="True">
                                                                            <Setter Property="Background" Value="{StaticResource BgHoverBrush}"/>
                                                                        </Trigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Border.Style>
                                                            <StackPanel Orientation="Horizontal">
                                                                <TextBlock Text="{Binding GameName}"
                                                                           Foreground="{StaticResource TextPrimaryBrush}"
                                                                           FontWeight="SemiBold" FontSize="13"/>
                                                                <TextBlock Text="#" Foreground="{StaticResource TextMutedBrush}"
                                                                           FontSize="12" Margin="3,1,0,0"/>
                                                                <TextBlock Text="{Binding TagLine}"
                                                                           Foreground="{StaticResource TextMutedBrush}"
                                                                           FontSize="12" Margin="0,1,0,0"/>
                                                            </StackPanel>
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </StackPanel>

                                        <!-- Empty state (quand pas d'historique) -->
                                        <StackPanel Visibility="{Binding HasSearchHistory, Converter={StaticResource InvBoolVis}}"
                                                    HorizontalAlignment="Center" VerticalAlignment="Center"
                                                    Opacity="0.5" Margin="0,60">
                                            <TextBlock Text="üîç" FontSize="48" HorizontalAlignment="Center"/>
                                            <TextBlock Text="Entrez un Riot ID pour rechercher un joueur"
                                                       Foreground="{StaticResource TextSecondaryBrush}"
                                                       FontSize="14" HorizontalAlignment="Center" Margin="0,12,0,0"/>
                                            <TextBlock Text="Format : NomDeJoueur#EUW ou NomDeJoueur#FR1"
                                                       Foreground="{StaticResource TextMutedBrush}"
                                                       FontSize="12" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Grid>
                            </ScrollViewer>

                            <!-- Colonne droite : stats champions -->
                            <Border Grid.Column="1"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1,0,0,0">
                                <views:ChampionStatsCard
                                    DataContext="{Binding SearchedPlayer}"
                                    Visibility="{Binding HasSearchResult, Converter={StaticResource BoolVis}}"
                                    Margin="0"/>
                            </Border>
                        </Grid>
                    </Grid>

                    <!-- SETTINGS PAGE -->
                    <Grid x:Name="PageSettings" Visibility="Collapsed">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Border Grid.Row="0" Background="{StaticResource BgPrimaryBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="0,0,0,1" Padding="16,10">
                            <TextBlock Text="Param√®tres"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       FontSize="16" FontWeight="SemiBold"/>
                        </Border>

                        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto"
                                      Style="{StaticResource SlimScrollViewer}">
                            <StackPanel Margin="24,20" MaxWidth="560">

                                <!-- API Key section -->
                                <TextBlock Text="API RIOT"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           FontSize="10" FontWeight="SemiBold" Margin="0,0,0,10"/>

                                <Border Background="{StaticResource BgCardBrush}"
                                        BorderBrush="{StaticResource BorderBrush}"
                                        BorderThickness="1" CornerRadius="10"
                                        Padding="16" Margin="0,0,0,16">
                                    <StackPanel>
                                        <TextBlock Text="Cl√© API Riot Developer"
                                                   Foreground="{StaticResource TextSecondaryBrush}"
                                                   FontSize="13" Margin="0,0,0,6"/>
                                        <TextBox Text="{Binding Settings.RiotApiKey, UpdateSourceTrigger=PropertyChanged}"
                                                 Margin="0,0,0,8"/>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                            <Button Content="üîë  Tester la cl√©"
                                                    Style="{StaticResource GhostButton}"
                                                    Command="{Binding TestApiKeyCommand}"
                                                    Padding="10,5" FontSize="12"/>
                                            <Border x:Name="ApiTestResult" Margin="10,0,0,0"
                                                    Padding="8,4" CornerRadius="6"
                                                    Visibility="{Binding ApiTestMessage, Converter={StaticResource NullVis}}">
                                                <Border.Style>
                                                    <Style TargetType="Border">
                                                        <Setter Property="Background" Value="#1A3FB950"/>
                                                        <Style.Triggers>
                                                            <DataTrigger Binding="{Binding ApiTestSuccess}" Value="False">
                                                                <Setter Property="Background" Value="#1AF85149"/>
                                                            </DataTrigger>
                                                        </Style.Triggers>
                                                    </Style>
                                                </Border.Style>
                                                <TextBlock Text="{Binding ApiTestMessage}"
                                                           FontSize="12">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="Foreground" Value="#3FB950"/>
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding ApiTestSuccess}" Value="False">
                                                                    <Setter Property="Foreground" Value="#F85149"/>
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </Border>
                                        </StackPanel>
                                        <TextBlock TextWrapping="Wrap" FontSize="11"
                                                   Foreground="{StaticResource TextMutedBrush}">
                                            Obtenez votre cl√© sur
                                            <Hyperlink NavigateUri="https://developer.riotgames.com"
                                                       RequestNavigate="Hyperlink_RequestNavigate"
                                                       Foreground="{StaticResource AccentBlueLightBrush}">
                                                developer.riotgames.com
                                            </Hyperlink>
                                            ‚Äî Les cl√©s de dev expirent toutes les 24h.
                                        </TextBlock>
                                    </StackPanel>
                                </Border>

                                <!-- Region section -->
                                <TextBlock Text="R√âGION"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           FontSize="10" FontWeight="SemiBold" Margin="0,0,0,10"/>

                                <Border Background="{StaticResource BgCardBrush}"
                                        BorderBrush="{StaticResource BorderBrush}"
                                        BorderThickness="1" CornerRadius="10"
                                        Padding="16" Margin="0,0,0,16">
                                    <StackPanel>
                                        <TextBlock Text="Serveur / R√©gion"
                                                   Foreground="{StaticResource TextSecondaryBrush}"
                                                   FontSize="13" Margin="0,0,0,6"/>
                                        <ComboBox SelectedValue="{Binding Settings.Region}"
                                                  SelectedValuePath="Content"
                                                  HorizontalAlignment="Left" Width="160">
                                            <ComboBoxItem Content="EUW1"/>
                                            <ComboBoxItem Content="EUN1"/>
                                            <ComboBoxItem Content="NA1"/>
                                            <ComboBoxItem Content="KR"/>
                                            <ComboBoxItem Content="JP1"/>
                                            <ComboBoxItem Content="BR1"/>
                                            <ComboBoxItem Content="LA1"/>
                                            <ComboBoxItem Content="LA2"/>
                                            <ComboBoxItem Content="OC1"/>
                                            <ComboBoxItem Content="TR1"/>
                                            <ComboBoxItem Content="RU"/>
                                        </ComboBox>
                                    </StackPanel>
                                </Border>

                                <!-- Overlay section -->
                                <TextBlock Text="OVERLAY IN-GAME"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           FontSize="10" FontWeight="SemiBold" Margin="0,0,0,10"/>

                                <Border Background="{StaticResource BgCardBrush}"
                                        BorderBrush="{StaticResource BorderBrush}"
                                        BorderThickness="1" CornerRadius="10"
                                        Padding="16" Margin="0,0,0,16">
                                    <StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                            <CheckBox IsChecked="{Binding Settings.ShowOverlayInGame}"
                                                      Foreground="{StaticResource TextSecondaryBrush}"
                                                      Content="Afficher l'overlay en jeu"
                                                      FontSize="13"/>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Opacit√© :"
                                                       Foreground="{StaticResource TextSecondaryBrush}"
                                                       FontSize="13" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                            <Slider Minimum="0.3" Maximum="1.0"
                                                    Value="{Binding Settings.OverlayOpacity}"
                                                    Width="200" VerticalAlignment="Center"/>
                                            <TextBlock Foreground="{StaticResource TextMutedBrush}"
                                                       FontSize="12" VerticalAlignment="Center" Margin="8,0,0,0">
                                                <Run Text="{Binding Settings.OverlayOpacity, StringFormat={}{0:P0}, Mode=OneWay}"/>
                                            </TextBlock>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>

                                <!-- Save button -->
                                <Button Content="üíæ  Sauvegarder les param√®tres"
                                        Style="{StaticResource AccentButton}"
                                        Command="{Binding SaveSettingsCommand}"
                                        HorizontalAlignment="Left"
                                        Padding="16,10" FontSize="14"/>

                                <TextBlock Text="{Binding StatusMessage}"
                                           Foreground="{StaticResource TextSecondaryBrush}"
                                           FontSize="12" Margin="0,10,0,0"/>
                            </StackPanel>
                        </ScrollViewer>
                    </Grid>

                    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                    <!--  PANNEAU D√âTAIL DE PARTIE ‚Äî superpos√© par-dessus tout     -->
                    <!--  Visible uniquement quand SelectedMatch != null            -->
                    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                    <Grid x:Name="MatchDetailPanel"
                          Visibility="Collapsed"
                          Panel.ZIndex="100">

                        <!-- Fond semi-transparent -->
                        <Rectangle Fill="#CC0D1117"/>

                        <!-- Carte centrale -->
                        <Border Background="{StaticResource BgPrimaryBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="1"
                                CornerRadius="10"
                                Margin="20,16"
                                DataContext="{Binding SelectedMatch}">

                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="46"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <!-- ‚îÄ‚îÄ Header ‚îÄ‚îÄ -->
                                <Border Grid.Row="0"
                                        BorderBrush="{StaticResource BorderBrush}"
                                        BorderThickness="0,0,0,1"
                                        CornerRadius="10,10,0,0"
                                        Padding="16,0"
                                        Background="{StaticResource BgSecondaryBrush}">
                                    <Grid>
                                        <!-- Infos partie ‚Äî masqu√©es pendant le chargement -->
                                        <StackPanel Orientation="Horizontal"
                                                    VerticalAlignment="Center"
                                                    Margin="0,0,40,0">
                                            <StackPanel.Style>
                                                <Style TargetType="StackPanel">
                                                    <Setter Property="Visibility" Value="Visible"/>
                                                    <Style.Triggers>
                                                        <DataTrigger Binding="{Binding IsLoading}" Value="True">
                                                            <Setter Property="Visibility" Value="Collapsed"/>
                                                        </DataTrigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </StackPanel.Style>
                                            <Border Background="{StaticResource BgCardBrush}"
                                                    BorderBrush="{StaticResource BorderBrush}"
                                                    BorderThickness="1" CornerRadius="4"
                                                    Padding="8,3" Margin="0,0,10,0">
                                                <TextBlock Text="{Binding QueueName}"
                                                           Foreground="{StaticResource TextSecondaryBrush}"
                                                           FontSize="12" FontWeight="SemiBold"/>
                                            </Border>
                                            <TextBlock Foreground="{StaticResource TextMutedBrush}"
                                                       FontSize="12" VerticalAlignment="Center"
                                                       Margin="0,0,8,0">
                                                <Run Text="{Binding GameDuration, Converter={StaticResource GameDuration}}"/>
                                            </TextBlock>
                                            <TextBlock Text="¬∑" Foreground="{StaticResource BorderBrush}"
                                                       VerticalAlignment="Center" Margin="0,0,8,0"/>
                                            <TextBlock Foreground="{StaticResource TextMutedBrush}"
                                                       FontSize="12" VerticalAlignment="Center">
                                                <Run Text="{Binding GameCreation, Converter={StaticResource TimeAgo}}"/>
                                            </TextBlock>
                                        </StackPanel>

                                        <!-- Bouton fermer -->
                                        <Button HorizontalAlignment="Right"
                                                VerticalAlignment="Center"
                                                Click="CloseMatchDetailPanel_Click"
                                                Width="28" Height="28"
                                                Background="Transparent"
                                                BorderThickness="0"
                                                Cursor="Hand">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Setter Property="BorderThickness" Value="0"/>
                                                    <Style.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Background" Value="{StaticResource BgHoverBrush}"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                            <TextBlock Text="‚úï"
                                                       Foreground="{StaticResource TextMutedBrush}"
                                                       FontSize="13"
                                                       HorizontalAlignment="Center"
                                                       VerticalAlignment="Center"/>
                                        </Button>
                                    </Grid>
                                </Border>

                                <!-- ‚îÄ‚îÄ Loading ‚îÄ‚îÄ -->
                                <Grid Grid.Row="1"
                                      Visibility="{Binding IsLoading, Converter={StaticResource BoolVis}}">
                                    <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                                        <TextBlock Text="‚è≥" FontSize="36" HorizontalAlignment="Center"/>
                                        <TextBlock Text="Chargement de la partie..."
                                                   Foreground="{StaticResource TextSecondaryBrush}"
                                                   FontSize="14" HorizontalAlignment="Center"
                                                   Margin="0,10,0,0"/>
                                    </StackPanel>
                                </Grid>

                                <!-- ‚îÄ‚îÄ Contenu (√©quipes c√¥te √† c√¥te) ‚îÄ‚îÄ -->
                                <Grid Grid.Row="1"
                                      Visibility="{Binding IsLoading, Converter={StaticResource InvBoolVis}}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="30"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- VICTOIRE -->
                                    <Grid Grid.Column="0">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="34"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <Border Grid.Row="0"
                                                Background="#0A2010"
                                                BorderBrush="#238636"
                                                BorderThickness="0,0,0,2"
                                                Padding="14,0">
                                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                <TextBlock Text="üèÜ " FontSize="13"/>
                                                <TextBlock Text="VICTOIRE"
                                                           Foreground="#3FB950"
                                                           FontWeight="Bold" FontSize="13"/>
                                            </StackPanel>
                                        </Border>

                                        <ScrollViewer Grid.Row="1"
                                                      VerticalScrollBarVisibility="Auto"
                                                      Style="{StaticResource SlimScrollViewer}">
                                            <ItemsControl ItemsSource="{Binding BlueTeam}">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border BorderBrush="{StaticResource BorderBrush}"
                                                                BorderThickness="0,0,0,1"
                                                                Padding="10,7"
                                                                Cursor="Hand"
                                                                MouseLeftButtonUp="MatchParticipant_Click">
                                                            <Border.Style>
                                                                <Style TargetType="Border">
                                                                    <Setter Property="Background" Value="Transparent"/>
                                                                    <Style.Triggers>
                                                                        <Trigger Property="IsMouseOver" Value="True">
                                                                            <Setter Property="Background" Value="{StaticResource BgHoverBrush}"/>
                                                                        </Trigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Border.Style>
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="34"/>  <!-- Champion icon -->
                                                                    <ColumnDefinition Width="22"/>  <!-- Sorts -->
                                                                    <ColumnDefinition Width="*"/>   <!-- Nom -->
                                                                    <ColumnDefinition Width="76"/>  <!-- KDA -->
                                                                    <ColumnDefinition Width="44"/>  <!-- CS -->
                                                                    <ColumnDefinition Width="46"/>  <!-- Champ name -->
                                                                </Grid.ColumnDefinitions>

                                                                <!-- Ic√¥ne champion -->
                                                                <Border Grid.Column="0" Width="30" Height="30"
                                                                        CornerRadius="4" ClipToBounds="True"
                                                                        VerticalAlignment="Center">
                                                                    <Image Source="{Binding ChampionName, Converter={StaticResource ChampImg}}"/>
                                                                </Border>

                                                                <!-- Sorts invocateur -->
                                                                <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="2,0">
                                                                    <Border Width="16" Height="16" CornerRadius="2" ClipToBounds="True" Margin="0,0,0,1">
                                                                        <Image Source="{Binding Summoner1Id, Converter={StaticResource SpellImg}}"/>
                                                                    </Border>
                                                                    <Border Width="16" Height="16" CornerRadius="2" ClipToBounds="True">
                                                                        <Image Source="{Binding Summoner2Id, Converter={StaticResource SpellImg}}"/>
                                                                    </Border>
                                                                </StackPanel>

                                                                <!-- Nom + position -->
                                                                <StackPanel Grid.Column="2" VerticalAlignment="Center" Margin="6,0">
                                                                    <TextBlock Text="{Binding DisplayName}"
                                                                               Foreground="{StaticResource TextPrimaryBrush}"
                                                                               FontSize="12" FontWeight="SemiBold"
                                                                               TextTrimming="CharacterEllipsis"/>
                                                                    <TextBlock Text="{Binding Position}"
                                                                               Foreground="{StaticResource TextMutedBrush}"
                                                                               FontSize="10"/>
                                                                </StackPanel>

                                                                <!-- KDA -->
                                                                <StackPanel Grid.Column="3" VerticalAlignment="Center" HorizontalAlignment="Center">
                                                                    <TextBlock HorizontalAlignment="Center" FontSize="12">
                                                                        <Run Text="{Binding Kills}"   Foreground="#3FB950"/>
                                                                        <Run Text=" / " Foreground="{StaticResource TextMutedBrush}"/>
                                                                        <Run Text="{Binding Deaths}"  Foreground="#F85149"/>
                                                                        <Run Text=" / " Foreground="{StaticResource TextMutedBrush}"/>
                                                                        <Run Text="{Binding Assists}" Foreground="#58A6FF"/>
                                                                    </TextBlock>
                                                                    <TextBlock HorizontalAlignment="Center"
                                                                               Foreground="{StaticResource TextMutedBrush}"
                                                                               FontSize="10">
                                                                        <Run Text="{Binding KDA, Converter={StaticResource DoubleFmt}, Mode=OneWay}"/>
                                                                        <Run Text=" KDA"/>
                                                                    </TextBlock>
                                                                </StackPanel>

                                                                <!-- CS -->
                                                                <TextBlock Grid.Column="4"
                                                                           VerticalAlignment="Center" HorizontalAlignment="Center"
                                                                           Foreground="{StaticResource TextMutedBrush}" FontSize="11">
                                                                    <Run Text="{Binding CS}"/>
                                                                    <Run Text=" CS"/>
                                                                </TextBlock>

                                                                <!-- Champion name -->
                                                                <TextBlock Grid.Column="5"
                                                                           Text="{Binding ChampionName}"
                                                                           Foreground="{StaticResource TextMutedBrush}"
                                                                           FontSize="10" VerticalAlignment="Center"
                                                                           HorizontalAlignment="Center"
                                                                           TextTrimming="CharacterEllipsis"/>
                                                            </Grid>
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </ScrollViewer>
                                    </Grid>

                                    <!-- S√©parateur VS -->
                                    <TextBlock Grid.Column="1"
                                               Text="VS"
                                               Foreground="{StaticResource TextMutedBrush}"
                                               FontWeight="Bold" FontSize="12"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"/>

                                    <!-- D√âFAITE -->
                                    <Grid Grid.Column="2">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="34"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

                                        <Border Grid.Row="0"
                                                Background="#200A0A"
                                                BorderBrush="#F85149"
                                                BorderThickness="0,0,0,2"
                                                Padding="14,0">
                                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                <TextBlock Text="üíÄ " FontSize="13"/>
                                                <TextBlock Text="D√âFAITE"
                                                           Foreground="#F85149"
                                                           FontWeight="Bold" FontSize="13"/>
                                            </StackPanel>
                                        </Border>

                                        <ScrollViewer Grid.Row="1"
                                                      VerticalScrollBarVisibility="Auto"
                                                      Style="{StaticResource SlimScrollViewer}">
                                            <ItemsControl ItemsSource="{Binding RedTeam}">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border BorderBrush="{StaticResource BorderBrush}"
                                                                BorderThickness="0,0,0,1"
                                                                Padding="10,7"
                                                                Cursor="Hand"
                                                                MouseLeftButtonUp="MatchParticipant_Click">
                                                            <Border.Style>
                                                                <Style TargetType="Border">
                                                                    <Setter Property="Background" Value="Transparent"/>
                                                                    <Style.Triggers>
                                                                        <Trigger Property="IsMouseOver" Value="True">
                                                                            <Setter Property="Background" Value="{StaticResource BgHoverBrush}"/>
                                                                        </Trigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Border.Style>
                                                            <!-- C√¥t√© ennemi : layout miroir (champ name | CS | KDA | nom | sorts | ic√¥ne) -->
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="46"/>  <!-- Champ name -->
                                                                    <ColumnDefinition Width="44"/>  <!-- CS -->
                                                                    <ColumnDefinition Width="76"/>  <!-- KDA -->
                                                                    <ColumnDefinition Width="*"/>   <!-- Nom -->
                                                                    <ColumnDefinition Width="22"/>  <!-- Sorts -->
                                                                    <ColumnDefinition Width="34"/>  <!-- Champion icon -->
                                                                </Grid.ColumnDefinitions>

                                                                <!-- Champion name -->
                                                                <TextBlock Grid.Column="0"
                                                                           Text="{Binding ChampionName}"
                                                                           Foreground="{StaticResource TextMutedBrush}"
                                                                           FontSize="10" VerticalAlignment="Center"
                                                                           HorizontalAlignment="Center"
                                                                           TextTrimming="CharacterEllipsis"/>

                                                                <!-- CS -->
                                                                <TextBlock Grid.Column="1"
                                                                           VerticalAlignment="Center" HorizontalAlignment="Center"
                                                                           Foreground="{StaticResource TextMutedBrush}" FontSize="11">
                                                                    <Run Text="{Binding CS}"/>
                                                                    <Run Text=" CS"/>
                                                                </TextBlock>

                                                                <!-- KDA -->
                                                                <StackPanel Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Center">
                                                                    <TextBlock HorizontalAlignment="Center" FontSize="12">
                                                                        <Run Text="{Binding Kills}"   Foreground="#3FB950"/>
                                                                        <Run Text=" / " Foreground="{StaticResource TextMutedBrush}"/>
                                                                        <Run Text="{Binding Deaths}"  Foreground="#F85149"/>
                                                                        <Run Text=" / " Foreground="{StaticResource TextMutedBrush}"/>
                                                                        <Run Text="{Binding Assists}" Foreground="#58A6FF"/>
                                                                    </TextBlock>
                                                                    <TextBlock HorizontalAlignment="Center"
                                                                               Foreground="{StaticResource TextMutedBrush}"
                                                                               FontSize="10">
                                                                        <Run Text="{Binding KDA, Converter={StaticResource DoubleFmt}, Mode=OneWay}"/>
                                                                        <Run Text=" KDA"/>
                                                                    </TextBlock>
                                                                </StackPanel>

                                                                <!-- Nom + position -->
                                                                <StackPanel Grid.Column="3" VerticalAlignment="Center"
                                                                            HorizontalAlignment="Right" Margin="0,0,6,0">
                                                                    <TextBlock Text="{Binding DisplayName}"
                                                                               Foreground="{StaticResource TextPrimaryBrush}"
                                                                               FontSize="12" FontWeight="SemiBold"
                                                                               TextAlignment="Right"
                                                                               TextTrimming="CharacterEllipsis"/>
                                                                    <TextBlock Text="{Binding Position}"
                                                                               Foreground="{StaticResource TextMutedBrush}"
                                                                               FontSize="10" TextAlignment="Right"/>
                                                                </StackPanel>

                                                                <!-- Sorts invocateur -->
                                                                <StackPanel Grid.Column="4" VerticalAlignment="Center" Margin="2,0">
                                                                    <Border Width="16" Height="16" CornerRadius="2" ClipToBounds="True" Margin="0,0,0,1">
                                                                        <Image Source="{Binding Summoner1Id, Converter={StaticResource SpellImg}}"/>
                                                                    </Border>
                                                                    <Border Width="16" Height="16" CornerRadius="2" ClipToBounds="True">
                                                                        <Image Source="{Binding Summoner2Id, Converter={StaticResource SpellImg}}"/>
                                                                    </Border>
                                                                </StackPanel>

                                                                <!-- Ic√¥ne champion -->
                                                                <Border Grid.Column="5" Width="30" Height="30"
                                                                        CornerRadius="4" ClipToBounds="True"
                                                                        VerticalAlignment="Center">
                                                                    <Image Source="{Binding ChampionName, Converter={StaticResource ChampImg}}"/>
                                                                </Border>
                                                            </Grid>
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </ScrollViewer>
                                    </Grid>
                                </Grid>
                            </Grid>
                        </Border>
                    </Grid>
                    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                    <!--  PANNEAU LIVE GAME ‚Äî partie en cours d'un joueur recherch√© -->
                    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                    <Grid Visibility="{Binding HasLiveGameDetail, Converter={StaticResource BoolVis}}"
                          Panel.ZIndex="101">

                        <!-- Fond semi-transparent -->
                        <Rectangle Fill="#CC0D1117"/>

                        <!-- Carte centrale -->
                        <Border Background="{StaticResource BgPrimaryBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="1" CornerRadius="10"
                                Margin="20,16"
                                DataContext="{Binding LiveGameDetail}">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="46"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <!-- Header -->
                                <Border Grid.Row="0"
                                        BorderBrush="{StaticResource BorderBrush}"
                                        BorderThickness="0,0,0,1"
                                        CornerRadius="10,10,0,0"
                                        Padding="16,0"
                                        Background="{StaticResource BgSecondaryBrush}">
                                    <Grid>
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <Ellipse Width="8" Height="8" Fill="#FF6B3D" Margin="0,0,8,0"/>
                                            <TextBlock Text="PARTIE EN COURS"
                                                       Foreground="{StaticResource TextPrimaryBrush}"
                                                       FontSize="13" FontWeight="SemiBold"/>
                                        </StackPanel>
                                        <Button HorizontalAlignment="Right" VerticalAlignment="Center"
                                                Command="{Binding DataContext.CloseLiveGameCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                Width="28" Height="28"
                                                Background="Transparent" BorderThickness="0" Cursor="Hand">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
                                                    <Style.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                            <TextBlock Text="‚úï" FontSize="14"/>
                                        </Button>
                                    </Grid>
                                </Border>

                                <!-- Corps : Alli√©s | Ennemis -->
                                <Grid Grid.Row="1">

                                    <!-- Chargement -->
                                    <StackPanel Visibility="{Binding IsLoading, Converter={StaticResource BoolVis}}"
                                                HorizontalAlignment="Center" VerticalAlignment="Center" Margin="20">
                                        <TextBlock Text="‚è≥ Chargement des joueurs..."
                                                   Foreground="{StaticResource TextSecondaryBrush}"
                                                   FontSize="13" HorizontalAlignment="Center"/>
                                    </StackPanel>

                                    <Grid Visibility="{Binding IsLoading, Converter={StaticResource InvBoolVis}}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="1"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Alli√©s -->
                                        <Grid Grid.Column="0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="32"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <Border Grid.Row="0" Padding="12,0"
                                                    BorderBrush="{StaticResource BorderBrush}"
                                                    BorderThickness="0,0,0,1">
                                                <TextBlock Text="ALLI√âS"
                                                           Foreground="#3B82F6"
                                                           FontSize="11" FontWeight="Bold"
                                                           VerticalAlignment="Center"/>
                                            </Border>
                                            <ScrollViewer Grid.Row="1"
                                                          VerticalScrollBarVisibility="Auto"
                                                          Style="{StaticResource SlimScrollViewer}">
                                                <ItemsControl ItemsSource="{Binding AllyTeam}" Margin="8">
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <views:PlayerCard DataContext="{Binding}"/>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </ScrollViewer>
                                        </Grid>

                                        <!-- S√©parateur -->
                                        <Rectangle Grid.Column="1"
                                                   Fill="{StaticResource BorderBrush}"/>

                                        <!-- Ennemis -->
                                        <Grid Grid.Column="2">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="32"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <Border Grid.Row="0" Padding="12,0"
                                                    BorderBrush="{StaticResource BorderBrush}"
                                                    BorderThickness="0,0,0,1">
                                                <TextBlock Text="ENNEMIS"
                                                           Foreground="#EF4444"
                                                           FontSize="11" FontWeight="Bold"
                                                           VerticalAlignment="Center"/>
                                            </Border>
                                            <ScrollViewer Grid.Row="1"
                                                          VerticalScrollBarVisibility="Auto"
                                                          Style="{StaticResource SlimScrollViewer}">
                                                <ItemsControl ItemsSource="{Binding EnemyTeam}" Margin="8">
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <views:PlayerCard DataContext="{Binding}"/>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </ScrollViewer>
                                        </Grid>
                                    </Grid>
                                </Grid>
                            </Grid>
                        </Border>
                    </Grid>
                    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                    <!--  PANNEAU LIVE GAME ‚Äî partie en cours d'un joueur recherch√© -->
                    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
                    <Grid Visibility="{Binding HasLiveGameDetail, Converter={StaticResource BoolVis}}"
                          Panel.ZIndex="101">

                        <!-- Fond semi-transparent -->
                        <Rectangle Fill="#CC0D1117"/>

                        <!-- Carte centrale -->
                        <Border Background="{StaticResource BgPrimaryBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="1" CornerRadius="10"
                                Margin="20,16"
                                DataContext="{Binding LiveGameDetail}">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="46"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>

                                <!-- Header -->
                                <Border Grid.Row="0"
                                        BorderBrush="{StaticResource BorderBrush}"
                                        BorderThickness="0,0,0,1"
                                        CornerRadius="10,10,0,0"
                                        Padding="16,0"
                                        Background="{StaticResource BgSecondaryBrush}">
                                    <Grid>
                                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                            <Ellipse Width="8" Height="8" Fill="#FF6B3D" Margin="0,0,8,0"/>
                                            <TextBlock Text="PARTIE EN COURS"
                                                       Foreground="{StaticResource TextPrimaryBrush}"
                                                       FontSize="13" FontWeight="SemiBold"/>
                                        </StackPanel>
                                        <Button HorizontalAlignment="Right" VerticalAlignment="Center"
                                                Command="{Binding DataContext.CloseLiveGameCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                Width="28" Height="28"
                                                Background="Transparent" BorderThickness="0" Cursor="Hand">
                                            <Button.Style>
                                                <Style TargetType="Button">
                                                    <Setter Property="Background" Value="Transparent"/>
                                                    <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
                                                    <Style.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
                                                        </Trigger>
                                                    </Style.Triggers>
                                                </Style>
                                            </Button.Style>
                                            <TextBlock Text="‚úï" FontSize="14"/>
                                        </Button>
                                    </Grid>
                                </Border>

                                <!-- Corps : Alli√©s | Ennemis -->
                                <Grid Grid.Row="1">

                                    <!-- Chargement -->
                                    <StackPanel Visibility="{Binding IsLoading, Converter={StaticResource BoolVis}}"
                                                HorizontalAlignment="Center" VerticalAlignment="Center" Margin="20">
                                        <TextBlock Text="‚è≥ Chargement des joueurs..."
                                                   Foreground="{StaticResource TextSecondaryBrush}"
                                                   FontSize="13" HorizontalAlignment="Center"/>
                                    </StackPanel>

                                    <Grid Visibility="{Binding IsLoading, Converter={StaticResource InvBoolVis}}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="1"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Alli√©s -->
                                        <Grid Grid.Column="0">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="32"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <Border Grid.Row="0" Padding="12,0"
                                                    BorderBrush="{StaticResource BorderBrush}"
                                                    BorderThickness="0,0,0,1">
                                                <TextBlock Text="ALLI√âS"
                                                           Foreground="#3B82F6"
                                                           FontSize="11" FontWeight="Bold"
                                                           VerticalAlignment="Center"/>
                                            </Border>
                                            <ScrollViewer Grid.Row="1"
                                                          VerticalScrollBarVisibility="Auto"
                                                          Style="{StaticResource SlimScrollViewer}">
                                                <ItemsControl ItemsSource="{Binding AllyTeam}" Margin="8">
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <views:LivePlayerCard DataContext="{Binding}"/>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </ScrollViewer>
                                        </Grid>

                                        <!-- S√©parateur -->
                                        <Rectangle Grid.Column="1"
                                                   Fill="{StaticResource BorderBrush}"/>

                                        <!-- Ennemis -->
                                        <Grid Grid.Column="2">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="32"/>
                                                <RowDefinition Height="*"/>
                                            </Grid.RowDefinitions>
                                            <Border Grid.Row="0" Padding="12,0"
                                                    BorderBrush="{StaticResource BorderBrush}"
                                                    BorderThickness="0,0,0,1">
                                                <TextBlock Text="ENNEMIS"
                                                           Foreground="#EF4444"
                                                           FontSize="11" FontWeight="Bold"
                                                           VerticalAlignment="Center"/>
                                            </Border>
                                            <ScrollViewer Grid.Row="1"
                                                          VerticalScrollBarVisibility="Auto"
                                                          Style="{StaticResource SlimScrollViewer}">
                                                <ItemsControl ItemsSource="{Binding EnemyTeam}" Margin="8">
                                                    <ItemsControl.ItemTemplate>
                                                        <DataTemplate>
                                                            <views:LivePlayerCard DataContext="{Binding}"/>
                                                        </DataTemplate>
                                                    </ItemsControl.ItemTemplate>
                                                </ItemsControl>
                                            </ScrollViewer>
                                        </Grid>
                                    </Grid>
                                </Grid>
                            </Grid>
                        </Border>
                    </Grid>
                    <!-- FIN PANNEAU LIVE GAME -->
                </Grid>
            </Grid>

            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <!--  STATUS BAR                                            -->
            <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
            <Border Grid.Row="2" Background="{StaticResource BgPrimaryBrush}"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="0,1,0,0"
                    CornerRadius="0,0,12,12">
                <Grid Margin="12,0">
                    <TextBlock Text="{Binding StatusMessage}"
                               Foreground="{StaticResource TextMutedBrush}"
                               FontSize="11" VerticalAlignment="Center"/>
                    <TextBlock Text="MixOverlays v1.0 ‚Ä¢ by Mix"
                               Foreground="{StaticResource TextMutedBrush}"
                               FontSize="11" VerticalAlignment="Center"
                               HorizontalAlignment="Right"/>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
