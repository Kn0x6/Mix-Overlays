<UserControl x:Class="MixOverlays.Views.PlayerCard"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:conv="clr-namespace:MixOverlays.Converters">

    <UserControl.Resources>
        <!-- Converters â€” mÃªmes clÃ©s que l'original -->
        <conv:BoolToVisibilityConverter              x:Key="BoolVis"/>
        <conv:InverseBoolToVisibilityConverter       x:Key="InvBoolVis"/>
        <conv:WinLossBrushConverter                  x:Key="WinLossBrush"/>
        <conv:WinLossTextConverter                   x:Key="WinLossText"/>
        <conv:RankTierBrushConverter                 x:Key="RankBrush"/>
        <conv:KdaBrushConverter                      x:Key="KdaBrush"/>
        <conv:WinRateBrushConverter                  x:Key="WinRateBrush"/>
        <conv:PercentFormatConverter                 x:Key="PctFmt"/>
        <conv:MasteryPointsConverter                 x:Key="MasteryPts"/>
        <conv:GameDurationConverter                  x:Key="GameDuration"/>
        <conv:TimeAgoConverter                       x:Key="TimeAgo"/>
        <conv:UrlToImageSourceWithFallbackConverter  x:Key="UrlToImgWithFallback"/>
        <conv:ChampionNameToImageConverter           x:Key="ChampToImg"/>
        <conv:ChampionNameToSplashConverter          x:Key="ChampSplash"/>
        <conv:SummonerSpellIdToImageConverter        x:Key="SpellToImg"/>
        <conv:RuneIdToImageConverter                 x:Key="RuneToImg"/>
    </UserControl.Resources>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         CONTENEUR PRINCIPAL
         â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <Border Background="{StaticResource BgCardBrush}"
            BorderBrush="{StaticResource BorderBrush}"
            BorderThickness="1" CornerRadius="10">

        <!-- Root Grid : Loading + Content superposÃ©s -->
        <Grid>

        <!-- Loading -->
        <StackPanel Visibility="{Binding IsLoading, Converter={StaticResource BoolVis}}"
                    HorizontalAlignment="Center" VerticalAlignment="Center"
                    Margin="20" Opacity="0.6">
            <TextBlock Text="â³ Chargement..."
                       Foreground="{StaticResource TextSecondaryBrush}"
                       FontSize="13" HorizontalAlignment="Center"/>
        </StackPanel>

        <!-- Content -->
        <Grid Visibility="{Binding IsLoaded, Converter={StaticResource BoolVis}}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>  <!-- En-tÃªte pleine largeur -->
                <RowDefinition Height="*"/>     <!-- Corps deux colonnes -->
            </Grid.RowDefinitions>

            <!-- Splash art background (champion le plus maÃ®trisÃ©) -->
            <Border Grid.RowSpan="2" CornerRadius="10" ClipToBounds="True" Opacity="0.10">
                <Image Source="{Binding TopChampionName, Converter={StaticResource ChampSplash}}"
                       Stretch="UniformToFill"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"/>
            </Border>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 ROW 0 â€” EN-TÃŠTE JOUEUR (pleine largeur)
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Border Grid.Row="0"
                    Background="#BB161B22"
                    BorderBrush="{StaticResource BorderBrush}"
                    BorderThickness="0,0,0,1"
                    CornerRadius="10,10,0,0"
                    Padding="14,12">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="56"/>   <!-- Avatar -->
                        <ColumnDefinition Width="*"/>    <!-- Nom + rang + lanes -->
                        <ColumnDefinition Width="Auto"/> <!-- Winrate + V/D + live -->
                    </Grid.ColumnDefinitions>

                    <!-- Avatar avec bordure colorÃ©e par rang -->
                    <Border Grid.Column="0" Width="48" Height="48" CornerRadius="24"
                            BorderBrush="{Binding SoloRank.tier, Converter={StaticResource RankBrush}}"
                            BorderThickness="2" ClipToBounds="True">
                        <Image Source="{Binding ProfileIconUrl, Converter={StaticResource UrlToImgWithFallback}}"
                               Stretch="UniformToFill"/>
                    </Border>

                    <!-- Nom + tag + rang + lanes -->
                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="10,0,0,0">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding GameName}"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       FontWeight="SemiBold" FontSize="15"/>
                            <TextBlock Text="#"
                                       Foreground="{StaticResource TextMutedBrush}"
                                       FontSize="13" Margin="3,2,0,0"/>
                            <TextBlock Text="{Binding TagLine}"
                                       Foreground="{StaticResource TextMutedBrush}"
                                       FontSize="13" Margin="1,2,0,0"/>
                        </StackPanel>

                        <!-- Rang Solo (badge) -->
                        <Border CornerRadius="4" Padding="6,1" Margin="0,3,0,0"
                                HorizontalAlignment="Left" Background="Transparent">
                            <Border.Style>
                                <Style TargetType="Border">
                                    <Setter Property="Visibility" Value="Visible"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SoloRank}" Value="{x:Null}">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Border.Style>
                            <TextBlock FontSize="13" FontWeight="Bold"
                                       Foreground="{Binding SoloRank.tier, Converter={StaticResource RankBrush}}">
                                <Run Text="{Binding SoloRank.tier, Mode=OneWay}"/>
                                <Run Text=" "/>
                                <Run Text="{Binding SoloRank.rank, Mode=OneWay}"/>
                                <Run Text=" â€” "/>
                                <Run Text="{Binding SoloRank.leaguePoints, Mode=OneWay}"/>
                                <Run Text=" LP"/>
                            </TextBlock>
                        </Border>

                        <!-- Non classÃ© (fallback) -->
                        <TextBlock Text="Non classÃ©"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   FontSize="13" Margin="0,3,0,0">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding SoloRank}" Value="{x:Null}">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>

                        <!-- Lanes -->
                        <StackPanel Orientation="Horizontal" Margin="0,4,0,0"
                                    Visibility="{Binding HasLaneData, Converter={StaticResource BoolVis}}">
                            <Border Background="#20FFFFFF" BorderBrush="#30FFFFFF" BorderThickness="1"
                                    CornerRadius="3" Padding="5,1" Margin="0,0,5,0">
                                <TextBlock Text="{Binding PrimaryLane}" FontSize="11"
                                           Foreground="{StaticResource TextSecondaryBrush}"/>
                            </Border>
                            <Border CornerRadius="3" Padding="5,1"
                                    Background="#15AAAAAA" BorderBrush="#30AAAAAA" BorderThickness="1">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Setter Property="Visibility" Value="Visible"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding SecondaryLane}" Value="">
                                                <Setter Property="Visibility" Value="Collapsed"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                <TextBlock Text="{Binding SecondaryLane}" FontSize="11"
                                           Foreground="{StaticResource TextSecondaryBrush}"/>
                            </Border>
                        </StackPanel>
                    </StackPanel>

                    <!-- Winrate + V/D + bouton live -->
                    <StackPanel Grid.Column="2" VerticalAlignment="Center" Margin="8,0">
                        <TextBlock HorizontalAlignment="Right"
                                   Foreground="{Binding SoloWinRate, Converter={StaticResource WinRateBrush}}"
                                   FontSize="16" FontWeight="Bold"
                                   Text="{Binding SoloWinRate, Converter={StaticResource PctFmt}}"/>
                        <TextBlock HorizontalAlignment="Right" FontSize="12"
                                   Foreground="{StaticResource TextMutedBrush}">
                            <Run Text="{Binding SoloWins, Mode=OneWay}"/>
                            <Run Text="V " Foreground="#3FB950"/>
                            <Run Text="{Binding SoloLosses, Mode=OneWay}"/>
                            <Run Text="D"  Foreground="#F85149"/>
                        </TextBlock>
                        <!-- Bouton live -->
                        <Button HorizontalAlignment="Right" Margin="0,5,0,0"
                                Padding="8,3" FontSize="11" Cursor="Hand"
                                Visibility="{Binding IsInGame, Converter={StaticResource BoolVis}}"
                                Style="{StaticResource AccentButton}"
                                Command="{Binding DataContext.ViewLiveGameCommand,
                                          RelativeSource={RelativeSource AncestorType=Window}}"
                                CommandParameter="{Binding}">
                            ðŸ”´ EN PARTIE
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                 ROW 1 â€” CORPS : HISTORIQUE (gauche) | SÃ‰PARATEUR | STATS (droite)
                 â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>    <!-- Historique + champions -->
                    <ColumnDefinition Width="1"/>    <!-- SÃ©parateur vertical -->
                    <ColumnDefinition Width="220"/>  <!-- Panneau stats -->
                </Grid.ColumnDefinitions>

                <!-- SÃ©parateur vertical -->
                <Rectangle Grid.Column="1" Fill="{StaticResource BorderBrush}" VerticalAlignment="Stretch"/>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     COLONNE GAUCHE â€” Top champions + historique
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <ScrollViewer Grid.Column="0"
                              VerticalScrollBarVisibility="Auto"
                              Style="{StaticResource SlimScrollViewer}">
                    <StackPanel Margin="12,10,12,12">

                        <!-- Error banner -->
                        <Border Background="#1FF85149" BorderBrush="#40F85149"
                                BorderThickness="1" CornerRadius="6" Padding="10,6"
                                Margin="0,0,0,8"
                                Visibility="{Binding HasError, Converter={StaticResource BoolVis}}">
                            <TextBlock Text="{Binding ErrorMessage}"
                                       Foreground="#F85149" FontSize="11" TextWrapping="Wrap"/>
                        </Border>

                        <!-- â”€â”€ TOP CHAMPIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
                        <TextBlock Text="TOP CHAMPIONS"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   FontSize="10" FontWeight="SemiBold"
                                   Margin="0,0,0,6"/>

                        <ItemsControl ItemsSource="{Binding TopMasteries}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Margin="0,0,14,0" HorizontalAlignment="Center">
                                        <Border Width="42" Height="42" CornerRadius="21"
                                                ClipToBounds="True"
                                                BorderBrush="#40FFFFFF" BorderThickness="1">
                                            <Image Source="{Binding ChampionName, Converter={StaticResource ChampToImg}}"
                                                   Stretch="UniformToFill"/>
                                        </Border>
                                        <TextBlock Text="{Binding championPoints, Converter={StaticResource MasteryPts}}"
                                                   FontSize="11" HorizontalAlignment="Center"
                                                   Foreground="{StaticResource TextSecondaryBrush}"
                                                   Margin="0,2,0,0"/>
                                        <TextBlock Text="{Binding ChampionName}"
                                                   FontSize="10" HorizontalAlignment="Center"
                                                   Foreground="{StaticResource TextMutedBrush}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <Separator Margin="0,0,0,8"/>

                        <!-- â”€â”€ PARTIES RÃ‰CENTES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
                        <TextBlock Text="PARTIES RÃ‰CENTES"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   FontSize="10" FontWeight="SemiBold"
                                   Margin="0,0,0,4"/>

                        <ItemsControl ItemsSource="{Binding RecentMatches}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Margin="0,2" Cursor="Hand" CornerRadius="6"
                                            Background="Transparent">
                                        <Border.InputBindings>
                                            <MouseBinding MouseAction="LeftClick"
                                                          Command="{Binding DataContext.OpenMatchDetailCommand,
                                                                    RelativeSource={RelativeSource AncestorType=Window}}"
                                                          CommandParameter="{Binding}"/>
                                        </Border.InputBindings>
                                        <Border.Style>
                                            <Style TargetType="Border">
                                                <Style.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background" Value="{StaticResource BgHoverBrush}"/>
                                                    </Trigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Border.Style>

                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="4"/>   <!-- Bande colorÃ©e -->
                                                <ColumnDefinition Width="30"/>  <!-- V/D badge -->
                                                <ColumnDefinition Width="Auto"/><!-- Icons -->
                                                <ColumnDefinition Width="*"/>   <!-- K/D/A + info -->
                                                <ColumnDefinition Width="62"/>  <!-- KDA -->
                                                <ColumnDefinition Width="44"/>  <!-- DurÃ©e -->
                                            </Grid.ColumnDefinitions>

                                            <!-- Bande colorÃ©e gauche -->
                                            <Rectangle Grid.Column="0"
                                                       Fill="{Binding Win, Converter={StaticResource WinLossBrush}}"
                                                       RadiusX="3" RadiusY="3" Opacity="0.85"/>

                                            <!-- V / D badge â€” Grid pour sÃ©parer opacitÃ© fond / texte -->
                                            <Grid Grid.Column="1" Margin="5,2,4,2">
                                                <Border CornerRadius="4"
                                                        Background="{Binding Win, Converter={StaticResource WinLossBrush}}"
                                                        Opacity="0.20"/>
                                                <TextBlock Text="{Binding Win, Converter={StaticResource WinLossText}}"
                                                           HorizontalAlignment="Center" VerticalAlignment="Center"
                                                           FontWeight="Bold" FontSize="11"
                                                           Foreground="{Binding Win, Converter={StaticResource WinLossBrush}}"/>
                                            </Grid>

                                            <!-- Champion + rune + VS + opponent -->
                                            <Grid Grid.Column="2" Margin="2,4">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="36"/>  <!-- Champ icon -->
                                                    <ColumnDefinition Width="20"/>  <!-- Sorts (2 stacked) -->
                                                    <ColumnDefinition Width="14"/>  <!-- Rune -->
                                                    <ColumnDefinition Width="18"/>  <!-- vs -->
                                                    <ColumnDefinition Width="28"/>  <!-- Opp icon -->
                                                </Grid.ColumnDefinitions>

                                                <Border Grid.Column="0" Width="32" Height="32"
                                                        CornerRadius="16" ClipToBounds="True"
                                                        VerticalAlignment="Center"
                                                        BorderBrush="#40FFFFFF" BorderThickness="1">
                                                    <Image Source="{Binding ChampionName, Converter={StaticResource ChampToImg}}"
                                                           Stretch="UniformToFill"/>
                                                </Border>

                                                <!-- Sorts d'invocateur (proches du champion) -->
                                                <StackPanel Grid.Column="1" VerticalAlignment="Center"
                                                            HorizontalAlignment="Center">
                                                    <Image Width="14" Height="14" Margin="0,1"
                                                           Source="{Binding Summoner1Id, Converter={StaticResource SpellToImg}}"/>
                                                    <Image Width="14" Height="14" Margin="0,1"
                                                           Source="{Binding Summoner2Id, Converter={StaticResource SpellToImg}}"/>
                                                </StackPanel>

                                                <!-- Rune keystone -->
                                                <Image Grid.Column="2" Width="12" Height="12"
                                                       VerticalAlignment="Bottom" HorizontalAlignment="Left"
                                                       Source="{Binding PrimaryRuneId, Converter={StaticResource RuneToImg}}"/>

                                                <TextBlock Grid.Column="3"
                                                           Text="vs" FontSize="9"
                                                           Foreground="{StaticResource TextMutedBrush}"
                                                           VerticalAlignment="Center"
                                                           HorizontalAlignment="Center"/>

                                                <Border Grid.Column="4" Width="24" Height="24"
                                                        CornerRadius="12" ClipToBounds="True"
                                                        VerticalAlignment="Center"
                                                        BorderBrush="#30FFFFFF" BorderThickness="1">
                                                    <Image Source="{Binding OpponentChampionName, Converter={StaticResource ChampToImg}}"
                                                           Stretch="UniformToFill"/>
                                                </Border>
                                            </Grid>

                                            <!-- K/D/A + CS + Mode de jeu -->
                                            <StackPanel Grid.Column="3" VerticalAlignment="Center"
                                                        Margin="6,0">
                                                <TextBlock FontSize="13" FontWeight="SemiBold">
                                                    <Run Text="{Binding Kills,   Mode=OneWay}"
                                                         Foreground="{StaticResource TextPrimaryBrush}"/>
                                                    <Run Text=" / " Foreground="{StaticResource TextMutedBrush}"/>
                                                    <Run Text="{Binding Deaths,  Mode=OneWay}" Foreground="#F85149"/>
                                                    <Run Text=" / " Foreground="{StaticResource TextMutedBrush}"/>
                                                    <Run Text="{Binding Assists, Mode=OneWay}"
                                                         Foreground="{StaticResource TextPrimaryBrush}"/>
                                                </TextBlock>
                                                <StackPanel Orientation="Horizontal" Margin="0,1,0,0">
                                                    <TextBlock FontSize="10"
                                                               Foreground="{StaticResource TextMutedBrush}">
                                                        <Run Text="{Binding CS, Mode=OneWay}"/>
                                                        <Run Text=" CS"/>
                                                    </TextBlock>
                                                    <TextBlock Text=" Â· " FontSize="10"
                                                               Foreground="{StaticResource TextMutedBrush}"/>
                                                    <!-- Mode de jeu : utilise la propriÃ©tÃ© calculÃ©e de MatchSummary -->
                                                    <Border CornerRadius="3" Padding="4,1">
                                                        <Border.Style>
                                                            <Style TargetType="Border">
                                                                <Setter Property="Background" Value="#20AAAAAA"/>
                                                                <Style.Triggers>
                                                                    <DataTrigger Binding="{Binding QueueId}" Value="420">
                                                                        <Setter Property="Background" Value="#203B82F6"/>
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding QueueId}" Value="440">
                                                                        <Setter Property="Background" Value="#2010B981"/>
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding QueueId}" Value="450">
                                                                        <Setter Property="Background" Value="#208B5CF6"/>
                                                                    </DataTrigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Border.Style>
                                                        <TextBlock Text="{Binding GameModeDisplay}"
                                                                   FontSize="10" FontWeight="SemiBold">
                                                            <TextBlock.Style>
                                                                <Style TargetType="TextBlock">
                                                                    <Setter Property="Foreground" Value="{StaticResource TextMutedBrush}"/>
                                                                    <Style.Triggers>
                                                                        <DataTrigger Binding="{Binding QueueId}" Value="420">
                                                                            <Setter Property="Foreground" Value="#60A5FA"/>
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding QueueId}" Value="440">
                                                                            <Setter Property="Foreground" Value="#34D399"/>
                                                                        </DataTrigger>
                                                                        <DataTrigger Binding="{Binding QueueId}" Value="450">
                                                                            <Setter Property="Foreground" Value="#A78BFA"/>
                                                                        </DataTrigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </TextBlock.Style>
                                                        </TextBlock>
                                                    </Border>
                                                </StackPanel>
                                            </StackPanel>

                                            <!-- KDA value -->
                                            <StackPanel Grid.Column="4" VerticalAlignment="Center"
                                                        HorizontalAlignment="Right" Margin="4,0">
                                                <TextBlock HorizontalAlignment="Right"
                                                           FontSize="13" FontWeight="Bold"
                                                           Foreground="{Binding KDA, Converter={StaticResource KdaBrush}}">
                                                    <Run Text="{Binding KDA, Mode=OneWay, StringFormat='{}{0:F2}'}"/>
                                                </TextBlock>
                                                <TextBlock Text="KDA" FontSize="9"
                                                           HorizontalAlignment="Right"
                                                           Foreground="{StaticResource TextMutedBrush}"/>
                                            </StackPanel>

                                            <!-- DurÃ©e -->
                                            <TextBlock Grid.Column="5"
                                                       VerticalAlignment="Center"
                                                       HorizontalAlignment="Right"
                                                       Margin="2,0,8,0"
                                                       FontSize="11"
                                                       Foreground="{StaticResource TextMutedBrush}"
                                                       Text="{Binding GameDuration, Converter={StaticResource GameDuration}}"/>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <!-- Charger plus / loading -->
                        <Button Content="Charger plus"
                                Style="{StaticResource GhostButton}"
                                Margin="0,6,0,0"
                                HorizontalAlignment="Center"
                                Visibility="{Binding HasMoreMatches, Converter={StaticResource BoolVis}}"
                                Command="{Binding DataContext.LoadMoreMatchesCommand,
                                          RelativeSource={RelativeSource AncestorType=Window}}"
                                CommandParameter="{Binding}"/>

                        <TextBlock Text="â³ Chargement..."
                                   FontSize="11" HorizontalAlignment="Center"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   Margin="0,4,0,4"
                                   Visibility="{Binding IsLoadingMoreMatches, Converter={StaticResource BoolVis}}"/>
                    </StackPanel>
                </ScrollViewer>

                <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                     COLONNE DROITE â€” PANNEAU STATS
                     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
                <ScrollViewer Grid.Column="2"
                              VerticalScrollBarVisibility="Auto"
                              Style="{StaticResource SlimScrollViewer}">
                    <StackPanel Margin="10,10">

                        <!-- Titre section -->
                        <TextBlock Text="STATS RÃ‰CENTES"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   FontSize="10" FontWeight="SemiBold"
                                   Margin="0,0,0,8"/>

                        <!-- â”€â”€ 1. Winrate rÃ©cent â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
                        <Border Background="{StaticResource BgSecondaryBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="1" CornerRadius="8"
                                Padding="10,8" Margin="0,0,0,6">
                            <StackPanel>
                                <Grid Margin="0,0,0,5">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock Grid.Column="0" Text="Winrate rÃ©cent"
                                               FontSize="11"
                                               Foreground="{StaticResource TextSecondaryBrush}"/>
                                    <TextBlock Grid.Column="1"
                                               Text="{Binding RecentWinRateDisplay}"
                                               FontSize="12" FontWeight="Bold"
                                               Foreground="{Binding RecentWinRate, Converter={StaticResource WinRateBrush}}"/>
                                </Grid>
                                <!-- Barre de progression W/L -->
                                <ProgressBar Height="6"
                                             Minimum="0" Maximum="100"
                                             Value="{Binding RecentWinRate, Mode=OneWay}"
                                             Foreground="{Binding RecentWinRate, Converter={StaticResource WinRateBrush}}"
                                             Margin="0,0,0,5"/>
                                <!-- V / D / G -->
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock FontSize="11">
                                        <Run Text="{Binding RecentWins,   Mode=OneWay}" Foreground="#3FB950"/>
                                        <Run Text="V " Foreground="#3FB950"/>
                                    </TextBlock>
                                    <TextBlock Text=" Â· " FontSize="11"
                                               Foreground="{StaticResource TextMutedBrush}"/>
                                    <TextBlock FontSize="11">
                                        <Run Text="{Binding RecentLosses, Mode=OneWay}" Foreground="#F85149"/>
                                        <Run Text="D " Foreground="#F85149"/>
                                    </TextBlock>
                                    <TextBlock Text=" Â· " FontSize="11"
                                               Foreground="{StaticResource TextMutedBrush}"/>
                                    <TextBlock FontSize="11" Foreground="{StaticResource TextMutedBrush}">
                                        <Run Text="{Binding RecentGames, Mode=OneWay}"/>
                                        <Run Text="G"/>
                                    </TextBlock>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- â”€â”€ 2. KDA moyen â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
                        <Border Background="{StaticResource BgSecondaryBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="1" CornerRadius="8"
                                Padding="10,8" Margin="0,0,0,6">
                            <StackPanel>
                                <TextBlock Text="KDA moyen"
                                           FontSize="10"
                                           Foreground="{StaticResource TextMutedBrush}"
                                           Margin="0,0,0,3"/>
                                <!-- Valeur KDA principale -->
                                <TextBlock FontSize="22" FontWeight="Bold"
                                           HorizontalAlignment="Center"
                                           Foreground="{Binding AvgKDA, Converter={StaticResource KdaBrush}}"
                                           Text="{Binding AvgKDADisplay}"/>
                                <!-- K / D / A dÃ©taillÃ© -->
                                <TextBlock HorizontalAlignment="Center" FontSize="11"
                                           Margin="0,2,0,0">
                                    <Run Text="{Binding AvgKillsDisplay, Mode=OneWay}"
                                         Foreground="{StaticResource TextPrimaryBrush}"/>
                                    <Run Text=" / " Foreground="{StaticResource TextMutedBrush}"/>
                                    <Run Text="{Binding AvgDeathsDisplay, Mode=OneWay}" Foreground="#F85149"/>
                                    <Run Text=" / " Foreground="{StaticResource TextMutedBrush}"/>
                                    <Run Text="{Binding AvgAssistsDisplay, Mode=OneWay}"
                                         Foreground="{StaticResource TextPrimaryBrush}"/>
                                </TextBlock>
                            </StackPanel>
                        </Border>

                        <!-- â”€â”€ 3. CS/min + DurÃ©e moy. â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
                        <Grid Margin="0,0,0,6">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="5"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Border Grid.Column="0"
                                    Background="{StaticResource BgSecondaryBrush}"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1" CornerRadius="8"
                                    Padding="8,8">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock Text="CS/min"
                                               FontSize="10" HorizontalAlignment="Center"
                                               Foreground="{StaticResource TextMutedBrush}"
                                               Margin="0,0,0,3"/>
                                    <TextBlock FontSize="16" FontWeight="Bold"
                                               HorizontalAlignment="Center"
                                               Foreground="{StaticResource TextPrimaryBrush}"
                                               Text="{Binding AvgCSPerMinDisplay}"/>
                                    <TextBlock FontSize="10" HorizontalAlignment="Center"
                                               Foreground="{StaticResource TextMutedBrush}">
                                        <Run Text="{Binding AvgCSDisplay, Mode=OneWay}"/>
                                        <Run Text=" CS moy"/>
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <Border Grid.Column="2"
                                    Background="{StaticResource BgSecondaryBrush}"
                                    BorderBrush="{StaticResource BorderBrush}"
                                    BorderThickness="1" CornerRadius="8"
                                    Padding="8,8">
                                <StackPanel HorizontalAlignment="Center">
                                    <TextBlock Text="DurÃ©e moy."
                                               FontSize="10" HorizontalAlignment="Center"
                                               Foreground="{StaticResource TextMutedBrush}"
                                               Margin="0,0,0,3"/>
                                    <TextBlock FontSize="16" FontWeight="Bold"
                                               HorizontalAlignment="Center"
                                               Foreground="{StaticResource TextPrimaryBrush}"
                                               Text="{Binding AvgDurationDisplay}"/>
                                </StackPanel>
                            </Border>
                        </Grid>

                        <!-- â”€â”€ 4. Streak en cours â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
                        <Border Background="{StaticResource BgSecondaryBrush}"
                                BorderBrush="{StaticResource BorderBrush}"
                                BorderThickness="1" CornerRadius="8"
                                Padding="10,8" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Streak actuel"
                                           FontSize="11" VerticalAlignment="Center"
                                           Foreground="{StaticResource TextSecondaryBrush}"/>
                                <TextBlock Grid.Column="1"
                                           Text="{Binding StreakDisplay}"
                                           FontSize="14" FontWeight="Bold"
                                           Foreground="{StaticResource TextPrimaryBrush}"/>
                            </Grid>
                        </Border>

                        <!-- â”€â”€ 5. Par champion (top 3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
                        <TextBlock Text="PAR CHAMPION"
                                   Foreground="{StaticResource TextMutedBrush}"
                                   FontSize="10" FontWeight="SemiBold"
                                   Margin="0,0,0,6"/>

                        <ItemsControl ItemsSource="{Binding TopChampionStats}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="{StaticResource BgSecondaryBrush}"
                                            BorderBrush="{StaticResource BorderBrush}"
                                            BorderThickness="1" CornerRadius="8"
                                            Padding="8,7" Margin="0,0,0,5">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="34"/>   <!-- IcÃ´ne champ -->
                                                <ColumnDefinition Width="*"/>    <!-- Nom + stats -->
                                                <ColumnDefinition Width="Auto"/> <!-- Winrate -->
                                            </Grid.ColumnDefinitions>

                                            <!-- Champion icon -->
                                            <Border Grid.Column="0" Width="30" Height="30"
                                                    CornerRadius="15" ClipToBounds="True"
                                                    VerticalAlignment="Center"
                                                    BorderBrush="#40FFFFFF" BorderThickness="1">
                                                <Image Source="{Binding ChampionName, Converter={StaticResource ChampToImg}}"
                                                       Stretch="UniformToFill"/>
                                            </Border>

                                            <!-- Nom + record + KDA -->
                                            <StackPanel Grid.Column="1" VerticalAlignment="Center"
                                                        Margin="7,0,4,0">
                                                <TextBlock Text="{Binding ChampionName}"
                                                           FontSize="11" FontWeight="SemiBold"
                                                           Foreground="{StaticResource TextPrimaryBrush}"
                                                           TextTrimming="CharacterEllipsis"/>
                                                <TextBlock FontSize="10"
                                                           Foreground="{StaticResource TextMutedBrush}">
                                                    <Run Text="{Binding RecordDisplay, Mode=OneWay}"/>
                                                    <Run Text=" Â· "/>
                                                    <Run Text="{Binding KDADisplay, Mode=OneWay}"/>
                                                </TextBlock>
                                            </StackPanel>

                                            <!-- Winrate -->
                                            <StackPanel Grid.Column="2" VerticalAlignment="Center"
                                                        HorizontalAlignment="Right">
                                                <TextBlock Text="{Binding WinRateDisplay}"
                                                           FontSize="13" FontWeight="Bold"
                                                           HorizontalAlignment="Right"
                                                           Foreground="{Binding WinRate, Converter={StaticResource WinRateBrush}}"/>
                                                <TextBlock FontSize="10" HorizontalAlignment="Right"
                                                           Foreground="{StaticResource TextMutedBrush}">
                                                    <Run Text="{Binding Games, Mode=OneWay}"/>
                                                    <Run Text="G"/>
                                                </TextBlock>
                                            </StackPanel>
                                        </Grid>

                                        <!-- Mini barre winrate pour ce champion -->
                                        <Border.ToolTip>
                                            <TextBlock>
                                                <Run Text="{Binding ChampionName, Mode=OneWay}"/>
                                                <Run Text=" â€” "/>
                                                <Run Text="{Binding RecordDisplay, Mode=OneWay}"/>
                                                <Run Text=" Â· "/>
                                                <Run Text="{Binding KDADisplay, Mode=OneWay}"/>
                                            </TextBlock>
                                        </Border.ToolTip>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                    </StackPanel>
                </ScrollViewer>

            </Grid><!-- fin corps 2 colonnes -->
        </Grid><!-- fin Grid principal (IsLoaded) -->

        </Grid><!-- fin Root Grid (wrapper) -->
    </Border>
</UserControl>
